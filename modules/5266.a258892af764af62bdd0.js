"use strict";(self.webpackChunkfederation_modules=self.webpackChunkfederation_modules||[]).push([[5266],{9758:(t,e,n)=>{n.d(e,{B:()=>o});var r=n(6584),i=n(3922),a=n(2734);const o=Object.assign((function({children:t,callback:e=(()=>{}),countdownDate:n,milliseconds:o,step:s=1e3,useInitDate:u=!1}){const{uiCommon:{initDate:l}}=(0,i.GET_STORE)(),[c,m]=(0,a.useState)({years:"",months:"",days:"",hours:"",minutes:"",seconds:"",milliseconds:""});function d(t){const e=31536e6,n=2628e6,r=864e5,i=36e5,a=Math.floor(t/e);t%=e;const o=Math.floor(t/n);t%=n;const s=Math.floor(t/r);t%=r;const u=Math.floor(t/i);t%=i;const l=Math.floor(t/6e4);t%=6e4;const c=Math.floor(t/1e3);return t%=1e3,{years:a.toString(),months:o.toString().padStart(2,"0"),days:s.toString().padStart(2,"0"),hours:u.toString().padStart(2,"0"),minutes:l.toString().padStart(2,"0"),seconds:c.toString().padStart(2,"0"),milliseconds:t.toString().slice(0,2).padStart(2,"0")}}return(0,a.useEffect)((()=>{if(o&&!n){const t=function(t){const n=u?l:Date.now(),r=()=>{const r=Date.now()-n;if(t&&r>=t)return clearInterval(i),m(d(t)),void e();m(d(r))},i=setInterval(r,s);return r(),i}(o);return()=>clearInterval(t)}if(n&&!o){const t=function(t=new Date){const n=new Date(t).getTime(),r=()=>{const t=n-Date.now();if(t<=0)return clearInterval(i),m(d(0)),void e();m(d(t))},i=setInterval(r,s);return r(),i}(n);return()=>clearInterval(t)}const t=function(){const t=u?l:Date.now(),e=()=>{const e=Date.now()-t;m(d(e))},n=setInterval(e,s);return e(),n}();return()=>clearInterval(t)}),[]),(0,r.tZ)(r.HY,{children:t(c)})}),{Percent:function({children:t,callback:e=(()=>{}),from:n,to:i,step:o=1e3}){const[s,u]=(0,a.useState)(0);return(0,a.useEffect)((()=>{const t=new Date(n).getTime(),r=new Date(i).getTime()-t,a=()=>{const n=Date.now()-t,i=Math.round(n/r*100);if(n<=0)return clearInterval(s),u(100),void e();u(i)};a();const s=setInterval(a,o);return()=>clearInterval(s)}),[]),(0,r.tZ)(r.HY,{children:t({percent:s})})}})},9874:(t,e,n)=>{n.d(e,{z:()=>h});var r=n(6584),i=n(3922),a=n(5160),o=n(4977),s=n(2734),u=n(286),l=n(2464);const c=(0,o.observer)((function({children:t,onCLick:e=(()=>{}),delayOpen:n,delayClose:o,style:c}){const{tournamentsCommon:{labelTournament:m,setActiveTournamentId:d},uiCommon:{setModal:f},profileCommon:{profile:{currency:T,rounding:p}}}=(0,i.GET_STORE)(),{t:b}=(0,u.useTranslation)();if(!m.tournament)return null;if(!m.tournamentStrapi)return null;if(new Date(m.tournament.endAt).getTime()<=Date.now())return null;const g=(0,s.useMemo)((()=>{if(!m.tournamentStrapi.attributes.prizesTotalSum)return null;const t=m.tournamentStrapi.attributes.prizesTotalSum;return t[T]?t[T]:t.usd?t.usd:null}),[]),S=t=>{d(m.tournament.id),f({modalName:"tournamentsInfo",render:!0,delayOpen:n,delayClose:o}),e(t)};return(0,r.tZ)(r.HY,{children:(0,a.toChildArray)(t({endAt:m.tournament.endAt,description:b("TOURNAMENT.JOIN.NOTIF"),currencySign:g?.currencySign,sum:g?.sum,sumShort:g?.sum?(0,l.Z)(Number(g.sum),p):void 0})).map((t=>(0,a.cloneElement)(t,{onCLick:S,style:c})))})}));var m=n(6289);const d=(0,o.observer)((function({children:t}){const{tournamentsCommon:{activeTournamentStrapi:e,loading:n}}=(0,i.GET_STORE)(),a=(0,s.useMemo)((()=>e?e.attributes.rules:null),[e]);return(0,r.tZ)(r.HY,{children:t({rules:a?(0,m.compiler)(a):null,loading:n})})})),f=(0,o.observer)((function({children:t}){const{tournamentsCommon:{activeTournamentStrapi:e,loading:n},profileCommon:{profile:{currency:a}}}=(0,i.GET_STORE)(),{t:o}=(0,u.useTranslation)(),l=(0,s.useMemo)((()=>{if(!e)return null;if(!e.attributes.prizes)return null;const t=e.attributes.prizes;if("string"!=typeof Object.values(t)[0]){if(t[a]&&"object"==typeof t[a])return Object.keys(t[a]).map((e=>({key:e,value:t[a][e]})));if(t.usd)return Object.keys(t.usd).map((e=>({key:e,value:t.usd[e]})))}return Object.keys(t).map((e=>({key:e,value:t[e]})))}),[e,a]);return(0,r.tZ)(r.HY,{children:t({prize:l,titlePrize:o("TOURNAMENT.PRIZE"),loading:n})})})),T=(0,o.observer)((function({children:t}){const{tournamentsCommon:{activeTournamentId:e,tournamentsLeaderbords:n,getTournamentLeaderbords:a,activeTournamentStrapi:o,loading:l},profileCommon:{profile:{playerId:c,currency:m}}}=(0,i.GET_STORE)(),{t:d}=(0,u.useTranslation)(),[f,T]=(0,s.useState)([]),[p,b]=(0,s.useState)(-1);return(0,s.useEffect)((()=>{if(!e)return;if(!n[e])return;if(!o)return;if(!o.attributes.prizes)return;const t=o.attributes.prizes,r="string"!=typeof Object.values(t)[0];let i={};r?t[m]&&"object"==typeof t[m]?i=t[m]:t.usd&&(i=t.usd):i=t;const a=Object.keys(i).reduce(((t,e)=>{if(e.includes("-")||(t[e]=i[e]),e.includes("-")){const[n,r]=e.split("-");for(let a=Number(n);a<=Number(r);a++)t[a]=i[e]}return t}),{}),s=n[e].map(((t,e)=>(t.prize=a[t.rank]||"0",t)));for(let t=1;t<s.length;t++)if(s[t].rank>s[t-1].rank+1){b(t);break}T(s)}),[e,n,l]),(0,s.useEffect)((()=>{(async()=>{a(e)})()}),[]),(0,r.tZ)(r.HY,{children:t({list:f,listSpaceIndex:p,loading:l,activeId:c,titlePosition:d("TOURNAMENT.POSITION"),titleUser:d("TOURNAMENT.USER"),titlePoints:d("TOURNAMENT.SCORE"),titlePrize:d("TOURNAMENT.PRIZE")})})})),p=(0,o.observer)((function({children:t}){const{tournamentsCommon:{activeTournamentId:e,tournamentsWinners:n,getTournamentWinners:a,loading:o,activeTournamentStrapi:l},profileCommon:{profile:{playerId:c,currency:m}}}=(0,i.GET_STORE)(),{t:d}=(0,u.useTranslation)(),[f,T]=(0,s.useState)([]),[p,b]=(0,s.useState)(-1),[g,S]=(0,s.useState)(0);return(0,s.useEffect)((()=>{if(!e)return;if(!n[e])return;const t=n[e];try{const{prizes:e,prizesWinnerCount:n}=l.attributes;S(n);const r="string"!=typeof Object.values(e)[0]?e[m]&&"object"==typeof e[m]?e[m]:e.usd?e.usd:{}:e,i=Object.keys(r).reduce(((t,e)=>{if(e.includes("-")){const[n,i]=e.split("-").map(Number);for(let a=n;a<=i;a++)t[a]=r[e]}else t[e]=r[e];return t}),{});t.forEach((t=>{t.prize=String(i[t.rank])}))}catch(t){console.log(t,"error assigning prizes")}T(t);for(let e=1;e<t.length;e++)if(t[e].rank>t[e-1].rank+1){b(e);break}}),[e,n,o]),(0,s.useEffect)((()=>{(async()=>{a(e)})()}),[]),(0,r.tZ)(r.HY,{children:t({list:f.slice(0,g),listSpaceIndex:p,loading:o,activeId:c,titlePosition:d("TOURNAMENT.POSITION"),titleUser:d("TOURNAMENT.USER"),titlePoints:d("TOURNAMENT.SCORE"),titlePrize:d("TOURNAMENT.PRIZE")})})})),b=(0,a.createContext)({}),g=(0,o.observer)((function({children:t}){const{tournamentsCommon:{tournaments:e,tournamentsStrapi:n,loading:a},profileCommon:{profile:{currency:o,rounding:c},language:m}}=(0,i.GET_STORE)(),{t:d}=(0,u.useTranslation)(),[f,T]=(0,s.useState)([]),[p,b]=(0,s.useState)([]),[g,S]=(0,s.useState)([]);return(0,s.useEffect)((()=>{if(!e)return;if(!n)return;const t=[],r=[],i=[];for(let a=0;a<e.length;a++){const s=n[`${e[a].id}${m}`]||n[`${e[a].id}en`];if(!s)continue;const u=(()=>{if(!s)return null;if(!s.attributes.prizesTotalSum)return null;const t=s.attributes.prizesTotalSum;return t[o]?t[o]:t.usd?t.usd:null})(),d={tournamentId:e[a].id,timer:{countdownDate:new Date(e[a].endAt).getTime(),step:1e3,callback:()=>{}},startAt:e[a].startAt,endAt:e[a].endAt,finish:Date.now()>new Date(e[a].endAt).getTime(),image:s.attributes?.image.data.attributes.url,imageMob:s.attributes?.imageMob?.data?.attributes?.url,image656x192:s.attributes?.image656x192?.data?.attributes?.url,image592x540:s.attributes?.image592x540?.data?.attributes?.url,image320x200:s.attributes?.image320x200?.data?.attributes?.url,name:s.attributes?.description,winnerCount:s.attributes?.prizesWinnerCount,currency:u?.currencySign,sum:u?.sum,sumShort:u?.sum?(0,l.Z)(Number(u.sum),c):void 0};t.push(d),d.finish||r.push(d),d.finish&&i.push(d)}T(t),b(r),S(i)}),[e,n]),(0,r.tZ)(r.HY,{children:t({title:d("COMMON.TOURNAMENTS"),loading:a,list:f,listActive:p,listFinished:g})})})),S=(0,o.observer)((function({children:t}){const{tournamentsCommon:{tournaments:e,labelTournament:n}}=(0,i.GET_STORE)();return(0,r.tZ)(r.HY,{children:t({isActive:e.length>0,hasActiveTournament:!(!n.tournament||new Date(n.tournament.endAt).getTime()<=Date.now())})})})),h=Object.assign((function({children:t}){return(0,r.tZ)(r.HY,{children:t})}),{Status:S,Label:c,Info:Object.assign((function({children:t}){const{tournamentsCommon:{activeTournament:e,activeTournamentStrapi:n,loading:a},profileCommon:{profile:{currency:o,rounding:u}}}=(0,i.GET_STORE)();if(!e)return null;if(!n)return null;const[c,m]=(0,s.useState)(Date.now()>new Date(e.endAt).getTime()),d=(0,s.useMemo)((()=>{if(!n)return null;if(!n.attributes.prizesTotalSum)return null;const t=n.attributes.prizesTotalSum;return t[o]?t[o]:t.usd?t.usd:null}),[n,o]);return(0,r.tZ)(r.HY,{children:t({timer:{countdownDate:new Date(e.endAt).getTime(),step:1e3,callback:()=>m(!0)},startAt:e.startAt,endAt:e.endAt,finish:c,loading:a,image:n.attributes?.image?.data?.attributes?.url,imageMob:n.attributes?.imageMob?.data?.attributes?.url,image656x192:n.attributes?.image656x192?.data?.attributes?.url,image592x540:n.attributes?.image592x540?.data?.attributes?.url,image320x200:n.attributes?.image320x200?.data?.attributes?.url,name:n.attributes?.description,winnerCount:n.attributes?.prizesWinnerCount,currency:d?.currencySign,sum:d?.sum,sumShort:d?.sum?(0,l.Z)(Number(d.sum),u):void 0})})}),{Rule:d,Prize:f,Leaderbords:T,Winners:p,Tab:Object.assign((function({children:t,list:e=["leaderbords","prizes","rules","winners"]}){const{t:n}=(0,u.useTranslation)(),[i,a]=(0,s.useState)(0),o={leaderbords:n("TOURNAMENT.LEADERBOARD"),prizes:n("TOURNAMENT.PRIZES"),rules:n("COMMON.RULES"),winners:n("TOURNAMENT.WINNERS")};return(0,r.tZ)(b.Provider,{value:{setActive:a},children:(0,r.tZ)(r.HY,{children:t({list:e.map((t=>o[t])),active:i})})})}),{Item:function({children:t,index:e,onClick:n=(()=>{})}){const{setActive:i}=(0,s.useContext)(b),o=()=>{i(e),n()};return(0,r.tZ)(r.HY,{children:(0,a.toChildArray)(t).map((t=>(0,a.cloneElement)(t,{onClick:o})))})}})}),List:Object.assign(g,{Button:function({children:t,onClick:e=(()=>{}),delayOpen:n,delayClose:o,tournamentId:s}){const{tournamentsCommon:{setActiveTournamentId:l},uiCommon:{setModal:c}}=(0,i.GET_STORE)(),{t:m}=(0,u.useTranslation)(),d=()=>{l(s),c({modalName:"tournamentsInfo",render:!0,delayOpen:n,delayClose:o}),e()};return(0,r.tZ)(r.HY,{children:(0,a.toChildArray)(t({title:m("COMMON.DETAILS")})).map((t=>(0,a.cloneElement)(t,{onClick:d})))})}})})}}]);